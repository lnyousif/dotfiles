# ==============================
# General Settings
# ==============================
# Esc without delay - lower value for faster response
set-option -s escape-time 10
# Using emacs key bindings instead of vi
setw -g mode-keys emacs
set -g history-limit 1000
set -g focus-events on  # Focus events for terminal programs

# Default Shell Settings
set-option -g default-shell $SHELL
set-option -g default-command "${SHELL}"

# ==============================
# Copy Mode & Standard Keybindings
# ==============================
# Simple copy/paste
unbind p
bind p paste-buffer
# Standard navigation in copy mode (emacs style)
bind -n M-Up copy-mode
bind -n M-PPage copy-mode              # Alt+PageUp enters copy mode
bind -n S-Left send -X previous-word   # Shift+Left jumps to previous word in copy mode
bind -n S-Right send -X next-word      # Shift+Right jumps to next word in copy mode
# TIP: In copy mode, you can use arrow keys to navigate and select text
#      Press Enter to copy the selection to clipboard
#      Press Space to start selection and Enter to copy
#      Mouse selection is automatically copied when released

# ==============================
# Terminal Settings
# ==============================
# Enable RGB color support
set -g default-terminal "tmux-256color"
# Terminal-specific color overrides for compatibility
set -ga terminal-overrides ",xterm-256color:Tc,tmux-256color:Tc,foot*:Tc,alacritty:RGB"
# Enable RGB color support for all terminals - better color fidelity
set -as terminal-features ",*:RGB"

# ==============================
# Key Bindings
# ==============================
# Make it use C-a, similar to screen..
unbind C-b
unbind l
set -g prefix C-a                      # More accessible than default Ctrl+b
bind a send-prefix                     # Send the prefix key through to applications
bind C-a last-window                   # Quick toggle between current and last window
bind l next-window                     # Navigate to next window
bind h previous-window                 # Navigate to previous window
# Window/Pane Management
bind j command-prompt -p "join pane from:"  "join-pane -s '%%'"  # Move pane from another window
bind b break-pane                      # Convert pane to its own window
bind -n C-M-h swap-window -d -t -1     # Move current window one position left
bind -n C-M-l swap-window -d -t +1     # Move current window one position right
# Use Alt keys without prefix for common actions
bind -n M-o new-window -c '#{pane_current_path}'          # Alt+o: New window in current directory
bind -n M-i split-window -h -c '#{pane_current_path}'     # Alt+i: Split horizontally (side by side)
bind -n M-e split-window -c '#{pane_current_path}'        # Alt+e: Split vertically (one above other)
# Use Alt keys for window navigation
bind -n M-h previous-window            # Alt+h: Go to previous window
bind -n M-l next-window                # Alt+l: Go to next window
# switch windows alt+number
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9
# Use Alt-vim keys without prefix key to switch panes
bind -n M-a select-pane -L
bind -n M-s select-pane -D
bind -n M-w select-pane -U
bind -n M-d select-pane -R
# scroll
bind -n M-Pageup copy-mode -eu

# Reload key
bind r source-file ~/.tmux.conf \; display 'Reloaded tmux config.'
bind k confirm-before -p "kill-pane #W? (y/n)" kill-pane
bind K confirm-before -p "kill-session #S? (y/n)" kill-session

# Start numbering at 1
set -g base-index 1
set -g renumber-windows on

# Title
set -g set-titles on
set -g set-titles-string '#S - #W'
# window number,program name, active(or not)

# disable sound bell
set -g bell-action none
# disable visual bell
set -g visual-bell off

# statusbar
set -g status-interval 1
set -g status-justify left
set -g status-left-length 20
set -g status-left ' #[fg=blue,bold]#(hostname | cut -b -16)#[default] | '
set -g status-right ' | #[fg=yellow,bold]%H:%M:%S #[fg=blue]%a %Y-%m-%d '
set -g display-time 4000

# default statusbar colors
set -g status-style bg=colour235,fg=red

# default window title colors
setw -g window-status-style fg=white

# active window title colors
setw -g window-status-current-style fg=magenta

# window activity notify color
setw -g window-status-activity-style fg=green

# Window options
setw -g clock-mode-colour blue
setw -g clock-mode-style 24
setw -g visual-activity off
setw -g monitor-activity on
setw -g xterm-keys on
setw -g automatic-rename on
setw -g aggressive-resize on

# Mouse mode (tmux 2.2+)
set -g mouse on

# Toggle mouse on
bind m \
    set -g mouse on \;\
    display 'Mouse: ON'

# Toggle mouse off
bind M \
    set -g mouse off \;\
    display 'Mouse: OFF'

# ==============================
# Eye-Friendly Color Scheme
# ==============================
# Terminal-specific color overrides for compatibility
set -ga terminal-overrides ",xterm-256color:Tc,tmux-256color:Tc,foot*:Tc,alacritty:RGB"
# Enable RGB color support for all terminals - better color fidelity
set -as terminal-features ",*:RGB"

# Status bar - subtle coloring
set -g status-style bg=colour236,fg=colour248
set -g display-time 4000
set -g status-left ' #[fg=colour81,bold]#(hostname | cut -b -16)#[default] | '
set -g status-right '#{prefix_highlight} | #[fg=colour223]%H:%M #[fg=colour109]%Y-%m-%d '

# Window styling - easier to distinguish
setw -g window-status-style fg=colour109
setw -g window-status-current-style fg=colour215,bold
setw -g window-status-activity-style fg=colour108
setw -g window-status-format ' #I:#W '
setw -g window-status-current-format ' #I:#W '

# Pane borders - subtle but visible
set -g pane-border-style fg=colour240
set -g pane-active-border-style fg=colour109

# Message styling - important but not harsh
set -g message-style bg=colour239,fg=colour223

# Clock and other elements
setw -g clock-mode-colour colour109

# Plugin appearance settings
set -g @prefix_highlight_fg 'colour223'
set -g @prefix_highlight_bg 'colour239'

# ==============================
# Plugin Management
# ==============================
# List of plugins - TPM (Tmux Plugin Manager)
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'

# Highlight prefix key when pressed - visual feedback
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g status-right '#{prefix_highlight} | %a %Y-%m-%d %H:%M'

# Open highlighted text directly from tmux (URLs, files, etc)
set -g @plugin 'tmux-plugins/tmux-open'

# Initialize TMUX plugin manager (keep this line at the very bottom)
run '~/.tmux/plugins/tpm/tpm'
